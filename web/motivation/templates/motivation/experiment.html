{# #}

<p>Push the corresponding button to the letter shown here:</p>

<div>G</div>

<div>0.35€</div>
<p>Your earnings</p>

{% if experiment_type == 'antisocial' or experiment_type == 'prosocial' %}
    <div>0.15€</div>
    <p>Red Cross earnings</p>
{% endif %}

<a href="{% url 'motivation:thank-you' %}">When you want to stop, press here</a>

<p>{{ djangoToJavascript }}</p>

<button onclick="create_post()">Click me</button>

<!-- this div will contain time -->
<div id="time-container"></div>

<!-- include required js libraries -->

<!-- now the actual js code to show time -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script>
    // http://stackoverflow.com/a/14372793
    // https://realpython.com/blog/python/django-and-ajax-form-submissions/
    function updateTime(){
      var timcon = document.getElementById('time-container');
      timcon.innerHTML = Date.now();
        // $('.time-container').html(moment().format('h:mm:ss'));
    };

    updateTime();

    var fromDjango = "{{ djangoToJavascript }}";
    console.log(fromDjango);

    setInterval(function(){
        updateTime();
    }, 1000);

    // AJAX for posting
    function create_post() {
        $.ajax({
            url : "thank-you", // the endpoint
            type : "POST", // http method
            data : {
                the_post : fromDjango,
                csrfmiddlewaretoken: '{{ csrf_token }}'
            }, // data sent with the post request
            success : function(json) {
                window.location.href = 'thank-you';
			},
        });
    };
</script>
